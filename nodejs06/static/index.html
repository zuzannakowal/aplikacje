<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script type="text/javascript">
      function syncFetch(){
        const body = JSON.stringify({a: 3, imie: "marek"})
        const headers = {"Content-Type": "application/json"}

        const req = {method: "post", body, headers}
        fetch("/api", req)
          .then(response => response.json())
          .then(data => console.log("dostalem: ", data.imie))
      }
      async function asyncFetch(){
        const body = JSON.stringify({a: 6, nazwisko: "kowal"})
        const headers = {"Content-Type": "application/json"}

        let response = await fetch("/api", {method: "post", body, headers})
        if(!response.ok)
          return response.status
        else
          return await response.json()

      }
      $(document).ready(function(){
        $("#bt1").click(syncFetch)
        $("#bt2").click(async function(){
          let json = await asyncFetch()
          console.log(json)
        })
      })
    </script>

  </head>
  <body>
    <button id="bt1" type="button" name="button">sync</button>
    <button id="bt2" type="button" name="button">async</button>
  </body>
</html>
